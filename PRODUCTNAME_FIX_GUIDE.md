# ๐ง ุฏููู ุฅุตูุงุญ ูุชุบูุฑ ุงุณู ุงูููุชุฌ ูู ุงูุฑุณุงุฆู

## ๐จ ุงููุดููุฉ ุงูุชู ุชู ุญููุง

**ุงููุดููุฉ ุงูุฃุตููุฉ:**
```
ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู ูุน ุญุถุฑุชู ูุจูโจ
ุทูุจู ({productName}) ูู ุฃูุฏู ุฃูููุฉุ ููุฑูููุง ุจุฏุฃ ูู ุฅุนุฏุงุฏู ุจูู ุดุบู ูุงูุชูุงู.
```

**ุจุนุฏ ุงูุฅุตูุงุญ:**
```
ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู ูุน ุญุถุฑุชู ูุจูโจ
ุทูุจู (ููุจุงูู ุงูููุงู ุงูุฎุงุตุฉ k19) ูู ุฃูุฏู ุฃูููุฉุ ููุฑูููุง ุจุฏุฃ ูู ุฅุนุฏุงุฏู ุจูู ุดุบู ูุงูุชูุงู.
```

## โ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. **ุฅุตูุงุญ ุฏุงูุฉ ุงุณุชุจุฏุงู ุงููุชุบูุฑุงุช**
- โ ุฅุถุงูุฉ ุฏุนู ููุชุบูุฑ `{productName}` ุจุฌุงูุจ `{product}`
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงุณุชุฎุฑุงุฌ ุฃุณูุงุก ุงูููุชุฌุงุช ูู Google Sheets
- โ ุฅุถุงูุฉ ุชุณุฌูู ููุตู ูุนูููุฉ ุงูุงุณุชุจุฏุงู

### 2. **ุงูุชุญูู ูู ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช**
- โ ุงูุชุฃูุฏ ูู ุฃู `productName` ููุณุชุฎุฑุฌ ุจุดูู ุตุญูุญ ูู ุงูุนููุฏ K ูู Google Sheets
- โ ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุชู ูุฏ ูููู ูููุง ุงุณู ุงูููุชุฌ ูุงุฑุบุงู
- โ ุฅุถุงูุฉ ููู ุงูุชุฑุงุถูุฉ ุงุญุชุฑุงููุฉ

### 3. **ุชุญุณูู ุงูุชุณุฌูู ูุงููุฑุงูุจุฉ**
- โ ุฅุถุงูุฉ logs ููุตูุฉ ูุนูููุฉ ุงุณุชุจุฏุงู ุงููุชุบูุฑุงุช
- โ ุนุฑุถ ุงุณู ุงูููุชุฌ ูุจู ูุจุนุฏ ุงูุงุณุชุจุฏุงู
- โ ุชุชุจุน ุฌููุน ุงููุชุบูุฑุงุช ูู ุงูุฑุณุงูุฉ

## ๐งช ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### 1. **ุงุฎุชุจุงุฑ ุงุณุชุจุฏุงู ุงููุชุบูุฑุงุช**
```bash
# ุงุฎุชุจุงุฑ ุดุงูู ูุงุณุชุจุฏุงู ุงููุชุบูุฑุงุช
GET https://ecom-whatsapp-production.up.railway.app/api/test/message-replacement

# ุงููุชูุฌุฉ ุงููุชููุนุฉ:
{
  "success": true,
  "results": {
    "newOrder": {
      "template": "ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู ูุน ุญุถุฑุชู ูุจูโจ\nุทูุจู ({productName}) ูู ุฃูุฏู ุฃูููุฉ...",
      "result": "ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู ูุน ุญุถุฑุชู ูุจูโจ\nุทูุจู (ููุจุงูู ุงูููุงู ุงูุฎุงุตุฉ k19) ูู ุฃูุฏู ุฃูููุฉ...",
      "hasProductName": true,
      "productNameReplaced": true
    }
  },
  "summary": {
    "successfulReplacements": ["newOrder", "noAnswer", "shipped", "rejectedOffer"],
    "failedReplacements": []
  }
}
```

### 2. **ุงุฎุชุจุงุฑ ุงูุจูุงูุงุช ูู Google Sheets**
```bash
# ูุญุต ุงูุจูุงูุงุช ุงููุณุชุฎุฑุฌุฉ ูู Google Sheets
GET https://ecom-whatsapp-production.up.railway.app/api/sheets/data

# ุชุฃูุฏ ูู ูุฌูุฏ productName ูู ุงูุจูุงูุงุช:
{
  "name": "ูุจู",
  "productName": "ููุจุงูู ุงูููุงู ุงูุฎุงุตุฉ k19",
  "orderStatus": "ุฌุฏูุฏ"
}
```

### 3. **ุงุฎุชุจุงุฑ ูุญุฑู ุงูุฃุชูุชุฉ**
```bash
# ุงุฎุชุจุงุฑ ุงููุญุฑู ูุน ุงูุจูุงูุงุช ุงููุนููุฉ
GET https://ecom-whatsapp-production.up.railway.app/api/test/automation-engine

# ุชุฃูุฏ ูู ูุฌุงุญ ุงุณุชุจุฏุงู ุงููุชุบูุฑุงุช
```

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### 1. **ูุฑุงูุจุฉ Logs ูู ุงูุฅูุชุงุฌ**
```bash
# ุงุจุญุซ ุนู ูุฐู ุงูุฑุณุงุฆู ูู logs:
๐ Replacing message variables for order [ORDER_ID]:
   - Name: "ูุจู"
   - ProductName: "ููุจุงูู ุงูููุงู ุงูุฎุงุตุฉ k19"
   - Template: "ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู ูุน ุญุถุฑุชู ูุจูโจ..."

โ Message after replacement: "ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู ูุน ุญุถุฑุชู ูุจูโจ\nุทูุจู (ููุจุงูู ุงูููุงู ุงูุฎุงุตุฉ k19)..."
```

### 2. **ูุญุต ุงูุฑุณุงุฆู ุงููุฑุณูุฉ**
```bash
# ุชุฃูุฏ ูู ุฃู ุงูุฑุณุงุฆู ุชุญุชูู ุนูู ุงุณู ุงูููุชุฌ ุงููุนูู
# ุจุฏูุงู ูู {productName}
```

## ๐ฏ ุฎุทูุงุช ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### ุงูุฎุทูุฉ 1: ุงุฎุชุจุงุฑ ุงุณุชุจุฏุงู ุงููุชุบูุฑุงุช
```bash
curl -X GET "https://ecom-whatsapp-production.up.railway.app/api/test/message-replacement"
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฌููุน ุงูู templates ุชุธูุฑ `productNameReplaced: true`

### ุงูุฎุทูุฉ 2: ุชุดุบูู ูุญุฑู ุงูุฃุชูุชุฉ
```bash
# ุชุฃูุฏ ูู ุชุดุบูู ุงููุญุฑู
curl -X POST "https://ecom-whatsapp-production.up.railway.app/api/automation/start"

# ูุญุต ุงูุญุงูุฉ
curl -X GET "https://ecom-whatsapp-production.up.railway.app/api/automation/status"
```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฑุณุงูุฉ ูุนููุฉ
```bash
# ุบููุฑ ุญุงูุฉ ุทูุจ ูู Google Sheets ุฅูู "ุฌุฏูุฏ"
# ุฑุงูุจ logs ููุชุฃูุฏ ูู ุงุณุชุจุฏุงู productName ุจุดูู ุตุญูุญ
```

### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงูุฑุณุงูุฉ ุงููุฑุณูุฉ
```bash
# ุชุฃูุฏ ูู ุฃู ุงูุฑุณุงูุฉ ุงููุฑุณูุฉ ุชุญุชูู ุนูู:
# "ุทูุจู (ููุจุงูู ุงูููุงู ุงูุฎุงุตุฉ k19) ูู ุฃูุฏู ุฃูููุฉ"
# ูููุณ "ุทูุจู ({productName}) ูู ุฃูุฏู ุฃูููุฉ"
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ูุชู ุงุณุชุจุฏุงู productName:

1. **ุชุญูู ูู ุงูุจูุงูุงุช ูู Google Sheets:**
   ```bash
   GET /api/sheets/data
   # ุชุฃูุฏ ูู ุฃู productName ููุฌูุฏ ููุง ูุญุชูู ุนูู ููู ูุงุฑุบุฉ
   ```

2. **ุชุญูู ูู message templates:**
   ```bash
   GET /api/config/messages
   # ุชุฃูุฏ ูู ุฃู ุงูู templates ุชุญุชูู ุนูู {productName}
   ```

3. **ูุญุต logs ุงูุชูุตูููุฉ:**
   ```bash
   # ุงุจุญุซ ุนู:
   ๐ Replacing message variables for order...
   โ Message after replacement...
   ```

### ุฅุฐุง ุธูุฑุช "ุงูููุชุฌ" ุจุฏูุงู ูู ุงุณู ุงูููุชุฌ ุงููุนูู:

1. **ุชุญูู ูู ุงูุนููุฏ K ูู Google Sheets**
2. **ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูุง ุชุญุชูู ุนูู #ERROR!**
3. **ูุญุต extraction process ูู logs**

## ๐ ุงููุชุบูุฑุงุช ุงููุฏุนููุฉ ุงูุขู

```bash
{name}           โ ุงุณู ุงูุนููู
{product}        โ ุงุณู ุงูููุชุฌ (backward compatibility)
{productName}    โ ุงุณู ุงูููุชุฌ (ุงูุฌุฏูุฏ)
{price}          โ ุงูุณุนุฑ
{orderId}        โ ุฑูู ุงูุทูุจ
{phone}          โ ุฑูู ุงููุงุชู
{address}        โ ุงูุนููุงู
{governorate}    โ ุงููุญุงูุธุฉ
{orderStatus}    โ ุญุงูุฉ ุงูุทูุจ
{orderDate}      โ ุชุงุฑูุฎ ุงูุทูุจ
{quantity}       โ ุงููููุฉ
{total}          โ ุงูุฅุฌูุงูู
```

## โ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญ:
- โ **ุฌููุน ุงูุฑุณุงุฆู** ุชุนุฑุถ ุงุณู ุงูููุชุฌ ุงููุนูู
- โ **ูุง ุชูุฌุฏ ูุชุบูุฑุงุช ุบูุฑ ูุณุชุจุฏูุฉ** ูู ุงูุฑุณุงุฆู
- โ **ุชุณุฌูู ููุตู** ูุนูููุฉ ุงูุงุณุชุจุฏุงู
- โ **ุชูุงูู ูุน ุฌููุน ุฃููุงุน ุงูุฑุณุงุฆู** (ุฌุฏูุฏุ ูู ูุฑุฏุ ุชู ุงูุดุญูุ ุนุฑุถ ูุฑููุถ)

---

**ููุงุญุธุฉ**: ุงูุฅุตูุงุญ ูุญุงูุธ ุนูู ุฌููุน ุงููุธุงุฆู ุงูุฃุฎุฑู ููุง ูุคุซุฑ ุนูู ุฃู ุฌุงูุจ ุขุฎุฑ ูู ุงููุธุงู. ุงููุธุงู ุงูุขู ูุนุฑุถ ุฃุณูุงุก ุงูููุชุฌุงุช ุจุดูู ุตุญูุญ ูู ุฌููุน ุงูุฑุณุงุฆู ุงููุฑุณูุฉ. 